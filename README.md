# Проект "Task Tracker"

Этот проект представляет собой приложение для управления задачами с бэкендом на NestJS и фронтендом на Vue.js, оркестрированное с использованием Docker Compose.

## Оглавление

- [Настройка проекта](#настройка-проекта)
- [Переменные окружения (.env)](#переменные-окружения-env)
- [Конфигурация Nginx (frontend/nginx.conf)](#конфигурация-nginx-frontendnginxconf)
- [Запуск проекта с Docker Compose](#запуск-проекта-с-docker-compose)
- [Эндпоинты API бэкенда](#эндпоинты-api-бэкенда)
- [Доступ к фронтенду](#доступ-к-фронтенду)

## Настройка проекта

Для запуска этого проекта локально вам потребуется установленный Docker и Docker Compose.

1.  **Клонируйте репозиторий:**
    ```bash
    git clone https://github.com/Tolandorado/task-tracker.git
    cd task-tracker
    ```
2.  **Настройте переменные окружения:** Следуйте инструкциям в разделе [Переменные окружения (.env)](#переменные-окружения-env).
3.  **Запустите с Docker Compose:** Следуйте инструкциям в разделе [Запуск проекта с Docker Compose](#запуск-проекта-с-docker-compose).

## Переменные окружения (.env)

Проект использует переменные окружения для конфигурации, особенно для подключения к базе данных и URL API. Файл-шаблон `example.env` находится в корневой директории.

**Шаги по настройке:**

1.  **Создайте свой файл `.env`:**
    ```bash
    cp example.env .env
    ```
2.  **Отредактируйте файл `.env`:** Откройте только что созданный файл `.env` и заполните значения.

Ниже приведено описание ожидаемых переменных окружения:

### Бэкенд (переменные .env, используемые сервисом `backend`)

Эти переменные критически важны для подключения бэкенда NestJS к базе данных и определения его порта.

*   `DB_HOST=db`: Хост базы данных. При запуске с Docker Compose это обычно имя сервиса вашего контейнера базы данных (например, `db`).
*   `DB_PORT=5432`: Порт базы данных.
*   `DB_USER=user`: Имя пользователя базы данных.
*   `DB_PASSWORD=password`: Пароль базы данных.
*   `DB_NAME=time_tracker`: Имя базы данных.
*   `VITE_BACKEND_PORT=8080`: Порт, на котором будет работать приложение бэкенда NestJS.

### Фронтенд (переменные .env, используемые сервисом `frontend`)

Эти переменные используются фронтендом Vue.js для определения, куда отправлять запросы API.

*   `VITE_BACKEND_BASE_URL=http://localhost`: Базовый URL для API бэкенда. При локальном запуске он обычно указывает на ваш сервис бэкенда. Если вы запускаете фронтенд напрямую (не через Nginx в Docker Compose), убедитесь, что это соответствует доступному URL вашего бэкенда.

**Важное примечание по безопасности:** Никогда не коммитьте ваш файл `.env` напрямую в систему контроля версий, так как он может содержать конфиденциальные учетные данные. Файл `.gitignore` уже настроен на игнорирование `.env`.

## Конфигурация Nginx (frontend/nginx.conf)

Файл `frontend/nginx.conf` используется в настройке Docker Compose для обслуживания фронтенд-приложения Vue.js.

**Назначение:**

*   **Обслуживание статических файлов:** Nginx настроен для обслуживания скомпилированных статических ресурсов приложения Vue.js (из директории `dist`).
*   **Проксирование API:** Он действует как обратный прокси для запросов API. Это означает, что если фронтенд делает запрос к `/api/*`, Nginx перенаправит этот запрос к сервису бэкенда (например, `http://backend:3000`). Это критически важно для избежания проблем с CORS и обеспечения единой точки входа для фронтенда.

**Ключевые директивы:**

*   `listen 80;`: Nginx слушает порт 80 внутри контейнера.
*   `root /usr/share/nginx/html;`: Указывает директорию, где находятся статические файлы фронтенда внутри контейнера.
*   `try_files $uri $uri/ /index.html;`: Гарантирует, что все маршруты обрабатываются приложением Vue.js (маршрутизация одностраничного приложения).
*   `location /api/ { proxy_pass http://backend:3000; }`: Это правило проксирования. Любой запрос, начинающийся с `/api/`, будет перенаправлен на сервис `backend` по порту `3000`.

Обычно вам не нужно изменять этот файл, если вы не меняете директорию вывода сборки фронтенда, имя сервиса бэкенда или путь API.

## Запуск проекта с Docker Compose

После того как ваш файл `.env` настроен, вы можете запустить весь стек приложения с помощью Docker Compose:

```bash
docker-compose up --build
```

*   `docker-compose up`: Запускает все сервисы, определенные в вашем `docker-compose.yml`.
*   `--build`: Пересобирает образы Docker для ваших сервисов. Используйте это, когда вы внесли изменения в ваши `Dockerfile` или зависимости проекта. Если вы изменили только код, а не зависимости/Dockerfile, вы можете опустить `--build` для более быстрого запуска.

Для запуска в отсоединенном режиме (в фоновом режиме):
```bash
docker-compose up -d --build
```

Для остановки сервисов:
```bash
docker-compose down
```

## Эндпоинты API бэкенда

Бэкенд NestJS будет доступен на порту `8080` (или на любом порту, который указан в `VITE_BACKEND_PORT` в вашем `.env`).
Пример: `http://localhost:8080/tasks`

## Доступ к фронтенду

Фронтенд Vue.js, обслуживаемый Nginx, будет доступен на порту `3000` (или на любом порту, который вы сопоставили в `docker-compose.yml`).
Пример: `http://localhost:3000`

Приятной разработки вашего Task Tracker!
